package com.test.tly;

import com.google.gson.Gson;

import java.util.Base64;
import java.util.List;
import java.util.function.Consumer;

public class Tly {

    private static final String mVpnAccount = "1479405751@qq.com";
    private static final String mVpnPwd = "1479405751yy";
    private static final String mVpnJson = "{\"ret\":\"ok\",\"time\":1670391275,\"info\":\"113.110.201.0\",\"transfer\":143.2,\"node\":[{\"id\":1,\"node_server\":\"yd.zoommeeting.work\",\"node_name\":\"*\\u53f0\\u6e7e1|cn-tw|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8830,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":2,\"node_server\":\"lt-3.zoommeeting.work\",\"node_name\":\"*\\u53f0\\u6e7e3|cn-tw|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"lt-3.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8832,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":3,\"node_server\":\"tw-6.zoommeeting.work\",\"node_name\":\"\\u53f0\\u6e7e6|tw|\\u7206\\u6ee1\",\"node_method\":\"ws\",\"node_status\":\"\\u7206\\u6ee1\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"tw-6.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8835,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":4,\"node_server\":\"tw-7.zoommeeting.work\",\"node_name\":\"\\u53f0\\u6e7e7|tw|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"tw-7.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8836,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":5,\"node_server\":\"tw-8.zoommeeting.work\",\"node_name\":\"\\u53f0\\u6e7e8|tw|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"tw-8.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8837,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":6,\"node_server\":\"tw-10.zoommeeting.work\",\"node_name\":\"\\u53f0\\u6e7e10|tw|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"tw-10.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":18858,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":7,\"node_server\":\"tw15.meetingcdn.com\",\"node_name\":\"\\u53f0\\u6e7e16|tw|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"tw15.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8864,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":8,\"node_server\":\"meeting.v2speed.net\",\"node_name\":\"*\\u7f8e\\u56fd1|cn-us|\\u7206\\u6ee1\",\"node_method\":\"ws\",\"node_status\":\"\\u7206\\u6ee1\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"meeting.v2speed.net\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":20888,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":9,\"node_server\":\"qz-2.zoommeeting.work\",\"node_name\":\"*\\u7f8e\\u56fd2|cn-us|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"qz-2.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8811,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":10,\"node_server\":\"lt-3.zoommeeting.work\",\"node_name\":\"*\\u7f8e\\u56fd3|cn-us|\\u7206\\u6ee1\",\"node_method\":\"ws\",\"node_status\":\"\\u7206\\u6ee1\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"lt-3.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8811,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":11,\"node_server\":\"172-82-17-18.nhost.00cdn.com\",\"node_name\":\"*\\u7f8e\\u56fd4|us|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"172-82-17-18.nhost.00cdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8812,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":12,\"node_server\":\"gz-1.zoommeeting.work\",\"node_name\":\"*\\u9999\\u6e2f1|cn-hk|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"gz-1.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8801,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":13,\"node_server\":\"qz-2.zoommeeting.work\",\"node_name\":\"*\\u9999\\u6e2f2|cn-hk|\\u7206\\u6ee1\",\"node_method\":\"ws\",\"node_status\":\"\\u7206\\u6ee1\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"qz-2.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8829,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":14,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"*\\u9999\\u6e2f5|cn-hk|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8854,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":15,\"node_server\":\"lt-3.zoommeeting.work\",\"node_name\":\"*\\u65e5\\u672c1|cn-jp|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"lt-3.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8806,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":16,\"node_server\":\"jp.zoommeeting.work\",\"node_name\":\"*\\u65e5\\u672c3|cn-jp|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"jp.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":10888,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":17,\"node_server\":\"lt-1.zoommeeting.work\",\"node_name\":\"*\\u97e9\\u56fd1|cn-kr|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"lt-1.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8802,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":18,\"node_server\":\"cn2-3-2.zoommeeting.work\",\"node_name\":\"*\\u65b0\\u52a0\\u57611|cn-sg|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"cn2-3-2.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8827,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":19,\"node_server\":\"sg7.meetingcdn.com\",\"node_name\":\"*\\u65b0\\u52a0\\u57613|cn-sg|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"sg7.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"1\",\"cipher\":\"none\",\"port\":8814,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":20,\"node_server\":\"lt-1.zoommeeting.work\",\"node_name\":\"\\u4fc4\\u7f57\\u65af1|cn-ru|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"lt-1.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8816,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":21,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u6cf0\\u56fd1|cn-th|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8841,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":22,\"node_server\":\"gz-1.zoommeeting.work\",\"node_name\":\"\\u5fb7\\u56fd1|cn-de|\\u7206\\u6ee1\",\"node_method\":\"ws\",\"node_status\":\"\\u7206\\u6ee1\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"gz-1.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8844,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":23,\"node_server\":\"gz-1.zoommeeting.work\",\"node_name\":\"\\u82f1\\u56fd1|cn-uk|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"gz-1.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8845,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":24,\"node_server\":\"gz-1.zoommeeting.work\",\"node_name\":\"\\u6fb3\\u5927\\u5229\\u4e9a|cn-au|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"gz-1.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8846,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":25,\"node_server\":\"lt-1.zoommeeting.work\",\"node_name\":\"\\u5370\\u5ea61|cn-in|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"lt-1.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8839,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":26,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u57c3\\u53ca1|cn-eg|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8842,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":27,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u571f\\u8033\\u51761|cn-tr|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8843,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":28,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u8d8a\\u5357|cn-vn|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8848,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":29,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u65b0\\u897f\\u5170|cn-nz|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8850,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":30,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u83f2\\u5f8b\\u5bbe|cn-ph|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8851,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":31,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u963f\\u6839\\u5ef7|cn-ar|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8852,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":32,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u5370\\u5c3c|cn-id|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8853,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":33,\"node_server\":\"gz-1.zoommeeting.work\",\"node_name\":\"\\u52a0\\u62ff\\u5927|cn-ca|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"gz-1.zoommeeting.work\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8855,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"},{\"id\":34,\"node_server\":\"yd1.meetingcdn.com\",\"node_name\":\"\\u9a6c\\u6765\\u897f\\u4e9a|cn-my|\\u6b63\\u5e38\",\"node_method\":\"ws\",\"node_status\":\"\\u6b63\\u5e38\",\"ws-path\":\"\\/Tlyx3pBN1vez3NQudNkB\",\"tls\":\"true\",\"tls-hostname\":\"yd1.meetingcdn.com\",\"alterId\":\"0\",\"recommend\":\"0\",\"cipher\":\"none\",\"port\":8847,\"pass\":\"b34daf14-7e12-5c28-a909-d138dc342a81\"}],\"node_number\":34}";
    private static final String mVmessModel = "{\n" +
            "  \"v\": \"2\",\n" +
            "  \"ps\": \"%s\",\n" +
            "  \"add\": \"%s\",\n" +
            "  \"port\": \"%d\",\n" +
            "  \"id\": \"%s\",\n" +
            "  \"aid\": \"0\",\n" +
            "  \"scy\": \"auto\",\n" +
            "  \"net\": \"ws\",\n" +
            "  \"type\": \"none\",\n" +
            "  \"host\": \"\",\n" +
            "  \"path\": \"%s\",\n" +
            "  \"tls\": \"tls\",\n" +
            "  \"sni\": \"\"\n" +
            "}";

    public static void main(String[] args) throws Exception {
        Gson gson = new Gson();
        VpnNodeResponse response = gson.fromJson(mVpnJson, VpnNodeResponse.class);
        List<VpnNode> nodeList = response.getNode();
        if (nodeList == null || nodeList.isEmpty()) {
            System.out.println("vpn node list is empty");
            return;
        }

        nodeList.forEach(new Consumer<VpnNode>() {
            @Override
            public void accept(VpnNode vpnNode) {
                String info = String.format(
                        mVmessModel,
                        vpnNode.getNode_name(),
                        vpnNode.getNode_server(),
                        vpnNode.getPort(),
                        vpnNode.getPass(),
                        vpnNode.getWs_path()
                );
                System.out.println("vmess://" + Base64.getEncoder().encodeToString(info.getBytes()));
            }
        });
    }
}
